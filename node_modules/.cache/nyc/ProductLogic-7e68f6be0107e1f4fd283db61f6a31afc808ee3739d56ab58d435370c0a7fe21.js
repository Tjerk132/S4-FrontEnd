function cov_23gaygbfoz(){var path="C:\\Users\\Tjerk_2\\Desktop\\S4 - Vue FrontEnd\\logic\\ProductLogic.js";var hash="48b023dbc7a9ab5f5ceb40915ffc331310f5cc5f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Tjerk_2\\Desktop\\S4 - Vue FrontEnd\\logic\\ProductLogic.js",statementMap:{"0":{start:{line:1,column:28},end:{line:1,column:68}},"1":{start:{line:5,column:8},end:{line:5,column:51}},"2":{start:{line:7,column:8},end:{line:7,column:58}},"3":{start:{line:9,column:8},end:{line:9,column:25}},"4":{start:{line:14,column:8},end:{line:14,column:51}},"5":{start:{line:16,column:8},end:{line:32,column:9}},"6":{start:{line:16,column:20},end:{line:16,column:21}},"7":{start:{line:17,column:27},end:{line:17,column:39}},"8":{start:{line:18,column:26},end:{line:18,column:42}},"9":{start:{line:20,column:12},end:{line:30,column:13}},"10":{start:{line:21,column:16},end:{line:24,column:17}},"11":{start:{line:23,column:20},end:{line:23,column:40}},"12":{start:{line:25,column:16},end:{line:29,column:17}},"13":{start:{line:27,column:32},end:{line:27,column:59}},"14":{start:{line:28,column:20},end:{line:28,column:47}},"15":{start:{line:33,column:8},end:{line:33,column:25}},"16":{start:{line:38,column:8},end:{line:38,column:48}},"17":{start:{line:42,column:25},end:{line:42,column:26}},"18":{start:{line:43,column:8},end:{line:49,column:11}},"19":{start:{line:44,column:12},end:{line:48,column:13}},"20":{start:{line:44,column:24},end:{line:44,column:25}},"21":{start:{line:46,column:30},end:{line:46,column:46}},"22":{start:{line:47,column:16},end:{line:47,column:44}},"23":{start:{line:50,column:8},end:{line:50,column:37}},"24":{start:{line:55,column:25},end:{line:55,column:27}},"25":{start:{line:57,column:8},end:{line:68,column:23}},"26":{start:{line:58,column:12},end:{line:65,column:15}},"27":{start:{line:60,column:30},end:{line:60,column:46}},"28":{start:{line:61,column:16},end:{line:64,column:17}},"29":{start:{line:61,column:28},end:{line:61,column:29}},"30":{start:{line:63,column:20},end:{line:63,column:48}},"31":{start:{line:66,column:12},end:{line:66,column:30}},"32":{start:{line:68,column:13},end:{line:68,column:23}},"33":{start:{line:72,column:28},end:{line:72,column:29}},"34":{start:{line:73,column:8},end:{line:75,column:11}},"35":{start:{line:74,column:12},end:{line:74,column:47}},"36":{start:{line:76,column:8},end:{line:76,column:29}},"37":{start:{line:80,column:21},end:{line:80,column:26}},"38":{start:{line:81,column:8},end:{line:88,column:11}},"39":{start:{line:82,column:26},end:{line:82,column:38}},"40":{start:{line:83,column:12},end:{line:87,column:13}},"41":{start:{line:84,column:16},end:{line:84,column:32}},"42":{start:{line:85,column:16},end:{line:85,column:30}},"43":{start:{line:86,column:16},end:{line:86,column:33}},"44":{start:{line:90,column:8},end:{line:94,column:30}},"45":{start:{line:91,column:12},end:{line:91,column:55}},"46":{start:{line:92,column:12},end:{line:92,column:29}},"47":{start:{line:94,column:13},end:{line:94,column:30}},"48":{start:{line:97,column:4},end:{line:105,column:5}}},fnMap:{"0":{name:"addToShoppingCart",decl:{start:{line:3,column:12},end:{line:3,column:29}},loc:{start:{line:3,column:53},end:{line:10,column:5}},line:3},"1":{name:"removeFromShoppingCart",decl:{start:{line:12,column:13},end:{line:12,column:35}},loc:{start:{line:12,column:67},end:{line:34,column:5}},line:12},"2":{name:"checkExistingBasket",decl:{start:{line:36,column:13},end:{line:36,column:32}},loc:{start:{line:36,column:43},end:{line:39,column:5}},line:36},"3":{name:"calculateBasketCosts",decl:{start:{line:41,column:13},end:{line:41,column:33}},loc:{start:{line:41,column:45},end:{line:51,column:5}},line:41},"4":{name:"(anonymous_4)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:38},end:{line:49,column:9}},line:43},"5":{name:"getProductIds",decl:{start:{line:53,column:13},end:{line:53,column:26}},loc:{start:{line:53,column:38},end:{line:69,column:5}},line:53},"6":{name:"(anonymous_6)",decl:{start:{line:58,column:30},end:{line:58,column:31}},loc:{start:{line:58,column:42},end:{line:65,column:13}},line:58},"7":{name:"getTotalQuantity",decl:{start:{line:71,column:13},end:{line:71,column:29}},loc:{start:{line:71,column:41},end:{line:77,column:5}},line:71},"8":{name:"(anonymous_8)",decl:{start:{line:73,column:26},end:{line:73,column:27}},loc:{start:{line:73,column:38},end:{line:75,column:9}},line:73},"9":{name:"existsInBasket",decl:{start:{line:79,column:13},end:{line:79,column:27}},loc:{start:{line:79,column:42},end:{line:95,column:5}},line:79},"10":{name:"(anonymous_10)",decl:{start:{line:81,column:26},end:{line:81,column:27}},loc:{start:{line:81,column:34},end:{line:88,column:9}},line:81}},branchMap:{"0":{loc:{start:{line:20,column:12},end:{line:30,column:13}},type:"if",locations:[{start:{line:20,column:12},end:{line:30,column:13}},{start:{line:20,column:12},end:{line:30,column:13}}],line:20},"1":{loc:{start:{line:21,column:16},end:{line:24,column:17}},type:"if",locations:[{start:{line:21,column:16},end:{line:24,column:17}},{start:{line:21,column:16},end:{line:24,column:17}}],line:21},"2":{loc:{start:{line:25,column:16},end:{line:29,column:17}},type:"if",locations:[{start:{line:25,column:16},end:{line:29,column:17}},{start:{line:25,column:16},end:{line:29,column:17}}],line:25},"3":{loc:{start:{line:38,column:15},end:{line:38,column:47}},type:"cond-expr",locations:[{start:{line:38,column:34},end:{line:38,column:36}},{start:{line:38,column:39},end:{line:38,column:47}}],line:38},"4":{loc:{start:{line:57,column:8},end:{line:68,column:23}},type:"if",locations:[{start:{line:57,column:8},end:{line:68,column:23}},{start:{line:57,column:8},end:{line:68,column:23}}],line:57},"5":{loc:{start:{line:83,column:12},end:{line:87,column:13}},type:"if",locations:[{start:{line:83,column:12},end:{line:87,column:13}},{start:{line:83,column:12},end:{line:87,column:13}}],line:83},"6":{loc:{start:{line:90,column:8},end:{line:94,column:30}},type:"if",locations:[{start:{line:90,column:8},end:{line:94,column:30}},{start:{line:90,column:8},end:{line:94,column:30}}],line:90}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"48b023dbc7a9ab5f5ceb40915ffc331310f5cc5f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_23gaygbfoz=function(){return actualCoverage;};return actualCoverage;}cov_23gaygbfoz();const ShoppingCartItem=(cov_23gaygbfoz().s[0]++,require('../models/ShoppingCartitem.js'));function addToShoppingCart(newProduct,cartItems){cov_23gaygbfoz().f[0]++;cov_23gaygbfoz().s[1]++;cartItems=checkExistingBasket(cartItems);cov_23gaygbfoz().s[2]++;cartItems=existsInBasket(newProduct,cartItems);cov_23gaygbfoz().s[3]++;return cartItems;}function removeFromShoppingCart(productToBeRemoved,cartItems){cov_23gaygbfoz().f[1]++;cov_23gaygbfoz().s[4]++;cartItems=checkExistingBasket(cartItems);//remove product from shopping cart
cov_23gaygbfoz().s[5]++;for(let i=(cov_23gaygbfoz().s[6]++,0);i<cartItems.length;i++){let cartItem=(cov_23gaygbfoz().s[7]++,cartItems[i]);let product=(cov_23gaygbfoz().s[8]++,cartItem.product);cov_23gaygbfoz().s[9]++;if(product.id==productToBeRemoved.id){cov_23gaygbfoz().b[0][0]++;cov_23gaygbfoz().s[10]++;if(cartItem.quantity>0){cov_23gaygbfoz().b[1][0]++;cov_23gaygbfoz().s[11]++;//lower quantity for chosen product
cartItem.quantity--;}else{cov_23gaygbfoz().b[1][1]++;}cov_23gaygbfoz().s[12]++;if(cartItem.quantity==0){cov_23gaygbfoz().b[2][0]++;//remove cartItem completely
let index=(cov_23gaygbfoz().s[13]++,cartItems.indexOf(cartItem));cov_23gaygbfoz().s[14]++;cartItems.splice(index,1);}else{cov_23gaygbfoz().b[2][1]++;}}else{cov_23gaygbfoz().b[0][1]++;}}cov_23gaygbfoz().s[15]++;return cartItems;}function checkExistingBasket(products){cov_23gaygbfoz().f[2]++;cov_23gaygbfoz().s[16]++;//create new basket if user doesn't have one  
return products==null?(cov_23gaygbfoz().b[3][0]++,[]):(cov_23gaygbfoz().b[3][1]++,products);}function calculateBasketCosts(cartItems){cov_23gaygbfoz().f[3]++;let totalCosts=(cov_23gaygbfoz().s[17]++,0);cov_23gaygbfoz().s[18]++;cartItems.forEach(cartItem=>{cov_23gaygbfoz().f[4]++;cov_23gaygbfoz().s[19]++;for(let i=(cov_23gaygbfoz().s[20]++,0);i<cartItem.quantity;i++){let product=(cov_23gaygbfoz().s[21]++,cartItem.product);cov_23gaygbfoz().s[22]++;totalCosts+=product.price;}});cov_23gaygbfoz().s[23]++;return totalCosts.toFixed(2);}function getProductIds(cartItems){cov_23gaygbfoz().f[5]++;let productIds=(cov_23gaygbfoz().s[24]++,[]);cov_23gaygbfoz().s[25]++;if(cartItems.length){cov_23gaygbfoz().b[4][0]++;cov_23gaygbfoz().s[26]++;cartItems.forEach(cartItem=>{cov_23gaygbfoz().f[6]++;let product=(cov_23gaygbfoz().s[27]++,cartItem.product);cov_23gaygbfoz().s[28]++;for(let i=(cov_23gaygbfoz().s[29]++,0);i<cartItem.quantity;i++){cov_23gaygbfoz().s[30]++;//add each product individually
productIds.push(product.id);}});cov_23gaygbfoz().s[31]++;return productIds;}else{cov_23gaygbfoz().b[4][1]++;cov_23gaygbfoz().s[32]++;return[];}}function getTotalQuantity(cartItems){cov_23gaygbfoz().f[7]++;let totalQuantity=(cov_23gaygbfoz().s[33]++,0);cov_23gaygbfoz().s[34]++;cartItems.forEach(cartItem=>{cov_23gaygbfoz().f[8]++;cov_23gaygbfoz().s[35]++;totalQuantity+=cartItem.quantity;});cov_23gaygbfoz().s[36]++;return totalQuantity;}function existsInBasket(p,cartItems){cov_23gaygbfoz().f[9]++;let exists=(cov_23gaygbfoz().s[37]++,false);cov_23gaygbfoz().s[38]++;cartItems.forEach(item=>{cov_23gaygbfoz().f[10]++;let product=(cov_23gaygbfoz().s[39]++,item.product);cov_23gaygbfoz().s[40]++;if(p.id==product.id){cov_23gaygbfoz().b[5][0]++;cov_23gaygbfoz().s[41]++;item.quantity++;cov_23gaygbfoz().s[42]++;exists=true;cov_23gaygbfoz().s[43]++;return cartItems;}else{cov_23gaygbfoz().b[5][1]++;}});//still gets triggered otherwise somehow
cov_23gaygbfoz().s[44]++;if(!exists){cov_23gaygbfoz().b[6][0]++;cov_23gaygbfoz().s[45]++;cartItems.push(new ShoppingCartItem(p,1));cov_23gaygbfoz().s[46]++;return cartItems;}else{cov_23gaygbfoz().b[6][1]++;cov_23gaygbfoz().s[47]++;return cartItems;}}cov_23gaygbfoz().s[48]++;module.exports={addToShoppingCart,removeFromShoppingCart,checkExistingBasket,calculateBasketCosts,getProductIds,getTotalQuantity,existsInBasket};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb2R1Y3RMb2dpYy5qcyJdLCJuYW1lcyI6WyJTaG9wcGluZ0NhcnRJdGVtIiwicmVxdWlyZSIsImFkZFRvU2hvcHBpbmdDYXJ0IiwibmV3UHJvZHVjdCIsImNhcnRJdGVtcyIsImNoZWNrRXhpc3RpbmdCYXNrZXQiLCJleGlzdHNJbkJhc2tldCIsInJlbW92ZUZyb21TaG9wcGluZ0NhcnQiLCJwcm9kdWN0VG9CZVJlbW92ZWQiLCJpIiwibGVuZ3RoIiwiY2FydEl0ZW0iLCJwcm9kdWN0IiwiaWQiLCJxdWFudGl0eSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInByb2R1Y3RzIiwiY2FsY3VsYXRlQmFza2V0Q29zdHMiLCJ0b3RhbENvc3RzIiwiZm9yRWFjaCIsInByaWNlIiwidG9GaXhlZCIsImdldFByb2R1Y3RJZHMiLCJwcm9kdWN0SWRzIiwicHVzaCIsImdldFRvdGFsUXVhbnRpdHkiLCJ0b3RhbFF1YW50aXR5IiwicCIsImV4aXN0cyIsIml0ZW0iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoidXpOQUFHLEtBQU1BLENBQUFBLGdCQUFnQiwwQkFBR0MsT0FBTyxDQUFDLCtCQUFELENBQVYsQ0FBdEIsQ0FFQSxRQUFTQyxDQUFBQSxpQkFBVCxDQUEyQkMsVUFBM0IsQ0FBdUNDLFNBQXZDLENBQWtELGlEQUU3Q0EsU0FBUyxDQUFHQyxtQkFBbUIsQ0FBQ0QsU0FBRCxDQUEvQixDQUY2Qyx3QkFJN0NBLFNBQVMsQ0FBR0UsY0FBYyxDQUFDSCxVQUFELENBQWFDLFNBQWIsQ0FBMUIsQ0FKNkMsd0JBTTdDLE1BQU9BLENBQUFBLFNBQVAsQ0FDSCxDQUVELFFBQVNHLENBQUFBLHNCQUFULENBQWdDQyxrQkFBaEMsQ0FBb0RKLFNBQXBELENBQStELGlEQUUzREEsU0FBUyxDQUFHQyxtQkFBbUIsQ0FBQ0QsU0FBRCxDQUEvQixDQUNBO0FBSDJELHdCQUkzRCxJQUFJLEdBQUlLLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFULENBQWVBLENB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QTJCekIsU0FBM0IsQ0FBc0MseUJBQ2xDLEdBQUkwQixDQUFBQSxNQUFNLDJCQUFHLEtBQUgsQ0FBVixDQURrQyx5QkFFbEMxQixTQUFTLENBQUNpQixPQUFWLENBQWtCVSxJQUFJLEVBQUksMEJBQ3RCLEdBQUluQixDQUFBQSxPQUFPLDJCQUFHbUIsSUFBSSxDQUFDbkIsT0FBUixDQUFYLENBRHNCLHlCQUV0QixHQUFHaUIsQ0FBQyxDQUFDaEIsRUFBRixFQUFRRCxPQUFPLENBQUNDLEVBQW5CLENBQXVCLHFEQUNuQmtCLElBQUksQ0FBQ2pCLFFBQUwsR0FEbUIseUJBRW5CZ0IsTUFBTSxDQUFHLElBQVQsQ0FGbUIseUJBR25CLE1BQU8xQixDQUFBQSxTQUFQLENBQ0gsQ0FKRCxpQ0FLSCxDQVBELEVBUUE7QUFWa0MseUJBV2xDLEdBQUcsQ0FBQzBCLE1BQUosQ0FBWSxxREFDUjFCLFNBQVMsQ0FBQ3NCLElBQVYsQ0FBZSxHQUFJMUIsQ0FBQUEsZ0JBQUosQ0FBcUI2QixDQUFyQixDQUF3QixDQUF4QixDQUFmLEVBRFEseUJBRVIsTUFBT3pCLENBQUFBLFNBQVAsQ0FDSCxDQUhELElBSUssMkRBQU9BLENBQUFBLFNBQVAsQ0FBaUIsQ0FDekIsQyx5QkFFRDRCLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiL0IsaUJBRGEsQ0FFYkssc0JBRmEsQ0FHYkYsbUJBSGEsQ0FJYmMsb0JBSmEsQ0FLYkssYUFMYSxDQU1iRyxnQkFOYSxDQU9ickIsY0FQYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIiAgIGNvbnN0IFNob3BwaW5nQ2FydEl0ZW0gPSByZXF1aXJlKCcuLi9tb2RlbHMvU2hvcHBpbmdDYXJ0aXRlbS5qcycpO1xyXG4gICBcclxuICAgZnVuY3Rpb24gYWRkVG9TaG9wcGluZ0NhcnQobmV3UHJvZHVjdCwgY2FydEl0ZW1zKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2FydEl0ZW1zID0gY2hlY2tFeGlzdGluZ0Jhc2tldChjYXJ0SXRlbXMpO1xyXG5cclxuICAgICAgICBjYXJ0SXRlbXMgPSBleGlzdHNJbkJhc2tldChuZXdQcm9kdWN0LCBjYXJ0SXRlbXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FydEl0ZW1zO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlRnJvbVNob3BwaW5nQ2FydChwcm9kdWN0VG9CZVJlbW92ZWQsIGNhcnRJdGVtcykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNhcnRJdGVtcyA9IGNoZWNrRXhpc3RpbmdCYXNrZXQoY2FydEl0ZW1zKTtcclxuICAgICAgICAvL3JlbW92ZSBwcm9kdWN0IGZyb20gc2hvcHBpbmcgY2FydFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYXJ0SXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNhcnRJdGVtID0gY2FydEl0ZW1zW2ldO1xyXG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IGNhcnRJdGVtLnByb2R1Y3Q7XHJcblxyXG4gICAgICAgICAgICBpZihwcm9kdWN0LmlkID09IHByb2R1Y3RUb0JlUmVtb3ZlZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgaWYoY2FydEl0ZW0ucXVhbnRpdHkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9sb3dlciBxdWFudGl0eSBmb3IgY2hvc2VuIHByb2R1Y3RcclxuICAgICAgICAgICAgICAgICAgICBjYXJ0SXRlbS5xdWFudGl0eS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoY2FydEl0ZW0ucXVhbnRpdHkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGNhcnRJdGVtIGNvbXBsZXRlbHlcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBjYXJ0SXRlbXMuaW5kZXhPZihjYXJ0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FydEl0ZW1zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gIFxyXG4gICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2FydEl0ZW1zO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBjaGVja0V4aXN0aW5nQmFza2V0KHByb2R1Y3RzKSB7XHJcbiAgICAgICAgLy9jcmVhdGUgbmV3IGJhc2tldCBpZiB1c2VyIGRvZXNuJ3QgaGF2ZSBvbmUgIFxyXG4gICAgICAgIHJldHVybiBwcm9kdWN0cyA9PSBudWxsID8gW10gOiBwcm9kdWN0cztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVCYXNrZXRDb3N0cyhjYXJ0SXRlbXMpIHtcclxuICAgICAgICBsZXQgdG90YWxDb3N0cyA9IDA7XHJcbiAgICAgICAgY2FydEl0ZW1zLmZvckVhY2goY2FydEl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2FydEl0ZW0ucXVhbnRpdHk7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gY2FydEl0ZW0ucHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIHRvdGFsQ29zdHMgKz0gcHJvZHVjdC5wcmljZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0b3RhbENvc3RzLnRvRml4ZWQoMik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UHJvZHVjdElkcyhjYXJ0SXRlbXMpIHtcclxuXHJcbiAgICAgICAgbGV0IHByb2R1Y3RJZHMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYoY2FydEl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjYXJ0SXRlbXMuZm9yRWFjaChjYXJ0SXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gY2FydEl0ZW0ucHJvZHVjdDtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYXJ0SXRlbS5xdWFudGl0eTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgZWFjaCBwcm9kdWN0IGluZGl2aWR1YWxseVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RJZHMucHVzaChwcm9kdWN0LmlkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0SWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUb3RhbFF1YW50aXR5KGNhcnRJdGVtcykge1xyXG4gICAgICAgIGxldCB0b3RhbFF1YW50aXR5ID0gMDtcclxuICAgICAgICBjYXJ0SXRlbXMuZm9yRWFjaChjYXJ0SXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRvdGFsUXVhbnRpdHkgKz0gY2FydEl0ZW0ucXVhbnRpdHk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsUXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZXhpc3RzSW5CYXNrZXQocCwgY2FydEl0ZW1zKSB7XHJcbiAgICAgICAgbGV0IGV4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgIGNhcnRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IGl0ZW0ucHJvZHVjdDtcclxuICAgICAgICAgICAgaWYocC5pZCA9PSBwcm9kdWN0LmlkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnF1YW50aXR5Kys7XHJcbiAgICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcnRJdGVtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyBcclxuICAgICAgICAvL3N0aWxsIGdldHMgdHJpZ2dlcmVkIG90aGVyd2lzZSBzb21laG93XHJcbiAgICAgICAgaWYoIWV4aXN0cykge1xyXG4gICAgICAgICAgICBjYXJ0SXRlbXMucHVzaChuZXcgU2hvcHBpbmdDYXJ0SXRlbShwLCAxKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0SXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgcmV0dXJuIGNhcnRJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgICAgICBhZGRUb1Nob3BwaW5nQ2FydCxcclxuICAgICAgICByZW1vdmVGcm9tU2hvcHBpbmdDYXJ0LFxyXG4gICAgICAgIGNoZWNrRXhpc3RpbmdCYXNrZXQsXHJcbiAgICAgICAgY2FsY3VsYXRlQmFza2V0Q29zdHMsXHJcbiAgICAgICAgZ2V0UHJvZHVjdElkcyxcclxuICAgICAgICBnZXRUb3RhbFF1YW50aXR5LFxyXG4gICAgICAgIGV4aXN0c0luQmFza2V0LFxyXG4gICAgfSJdfQ==